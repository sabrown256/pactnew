#!/bin/csh -f
#
# CHECK.LOCK - check if repository is locked
#
# Source Version: 3.0
# Software Release #: LLNL-CODE-422942
#
# include "cpyright.h"
#

unalias *

set psy_mngdir    = $cwd
set psy_scrdir    = $psy_mngdir:h/scripts
set SCSRepository = ""
set SRCDate       = ""
set LockOn        = "NO"

# define the Source Control System
source $psy_mngdir/pact-scs

#
# check if repository is locked
#
set lockst = `$psy_scrdir/scs-lock status`
if ($lockst == "locked") then
   echo ""
   echo " *** REPOSITORY IS LOCKED ***"
   echo ""
   $psy_scrdir/scs-lock cat
   echo ""
   set LockOn = "YES"
endif

if ($LockOn == "NO") then
   set nstatus = 0
else
   echo -n "Sleeping ZZZZZ"
Loop:
   set lockst = `$psy_scrdir/scs-lock status`
   if ($lockst == "locked") then
      echo -n "Z"
      sleep 30
      goto Loop
   else
      echo ""
      set nstatus = 0
   endif
endif

exit($nstatus)
