#!/bin/csh -f
#
# SRTEST - test scripts
#
# Source Version: 3.0
# Software Release #: LLNL-CODE-422942
#
# include "cpyright.h"
#

set Package = scripts
source ../scripts/test-env

set Tests = ""
while ($#argv > 0)
   switch ($1)
      case -h:
           echo ""
           echo "Usage: srtest [-h] [<test>*]"
           echo "  h  this help message"
           echo ""
           exit(1);
      default:
           set Tests = ( $1 )
           breaksw
   endsw
   shift
end

flog $Log cd $TestDir

@ Err = 0

set BeginTime = `$TIMER -r`

NoteD $Log ""
NoteD $Log "SCRIPT TEST ..."

#--------------------------------------------------------------------------
#--------------------------------------------------------------------------

   if ("$Tests" == "") then
      set Tests = ""
      set Tests = ($Tests subr)
   endif

   foreach i ($Tests)
      $SrcDir/tests/$i
      if ($status == 1) then
         set ERROR = TRUE
      endif
   end

#--------------------------------------------------------------------------
#--------------------------------------------------------------------------

set ETime = `$TIMER -b $BeginTime`

if ($Err != 0) then
   NoteD $Log ""
   NoteD $Log "SCRIPT TEST ... FAILED ($ETime)"
   NoteD $Log ""
   NoteD $Log "See $Log for details"
   NoteD $Log ""
else
   NoteD $Log "SCRIPT TEST ... PASSED ($ETime)"
endif
NoteD $Log ""

NoteD $Log " --------------------------------------------------------"

exit($Err)

