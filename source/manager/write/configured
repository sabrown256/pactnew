#!/bin/csh -f
#
# CONFIGURED - write the CONFIGURED file
#
# Source Version: 3.0
# Software Release #: LLNL-CODE-422942
#
# include "cpyright.h"
#

set Me = $0
source $Me:h/common

set lCfg = $3

Note $Log "----- write/configured -----"
Note $Log "Write: configured"
Note $Log ""

#--------------------------------------------------------------------------
#--------------------------------------------------------------------------

Separator $Log
NoteD $Log "   Configuration record - configured"
Note $Log ""

dbmget $Log EtcDir^        \
            HSY_Host^      \
            PSY_FltDir^    \
            OS_Name^       \
            HAVE_JPEGLIB^  \
            HAVE_PNGLIB^   \
            WARN_PATTERN^  \
            ERR_PATTERN^   \
            USE_TmpDir^    \
            USER

#--------------------------------------------------------------------------
#--------------------------------------------------------------------------

    set STDOUT = $EtcDir/configured

    flog $Log $RM $STDOUT
    flog $Log touch $STDOUT

    Note $STDOUT "Config       = $lCfg"
    Note $STDOUT "DbgOpt       = $DbgOpt"
    Note $STDOUT "Date         = `date`"
    if ("$HAVE_JPEGLIB" == "") then
       Note $STDOUT "JPEG         = no"
    else
       Note $STDOUT "JPEG         = yes"
    endif

    if ("$HAVE_PNGLIB" == "") then
       Note $STDOUT "PNG          = no"
    else
       Note $STDOUT "PNG          = yes"
    endif

    if (-f $lCfg) then
       set Shared = `grep Shared $lCfg`
       if ("$Shared" == "") then
          Note $STDOUT "Shared       = no"
       else
          Note $STDOUT "Shared       = yes"
       endif
    endif

    Note $STDOUT "USE_TmpDir   = $USE_TmpDir"
    Note $STDOUT "PSY_FltDir   = $PSY_FltDir"
    Note $STDOUT "WARN_PATTERN = $WARN_PATTERN"
    Note $STDOUT "ERR_PATTERN  = $ERR_PATTERN"

#--------------------------------------------------------------------------
#--------------------------------------------------------------------------

exit(0)

