#!/bin/csh -f
#
# MATH - analyze math library options
#
# Source Version: 3.0
# Software Release #: LLNL-CODE-422942
#
# include "cpyright.h"
#

set Me = $0
source $Me:h/common

Separator $Log
Note $Log "Analyze: math"

set MathLib = ""

#--------------------------------------------------------------------------
#--------------------------------------------------------------------------

# look for GNU Scientific library

SafeEnv GSL_Path ""

if (-d $RootInc/gsl) then
   set rinc = $RootInc
   set root = $rinc:h
   flog $Log setenv GSL_Path $root
   set MathLib = ( $MathLib gsl )
else
   flog $Log setenv GSL_Path ""
endif

#--------------------------------------------------------------------------
#--------------------------------------------------------------------------

# look for BLAS

SafeEnv BLAS_Path ""
#set MathLib = ( $MathLib blas )

#--------------------------------------------------------------------------
#--------------------------------------------------------------------------

# look for LAPACK

SafeEnv LAPACK_Path ""
#set MathLib = ( $MathLib lapack )

#--------------------------------------------------------------------------
#--------------------------------------------------------------------------

foreach i ("linpack" "slatec" "imsl")
   rm -f $Tmp.res
   (man $i | head) >& $Tmp.res

# AIX grep says: "No match found in database for foo"
# UNIX grep says: "No manual entry for foo"
# ULTRIX says: grep exits with 0 if it doesn't crash outright (can't use $status)

   set res = `grep -i "no ma" $Tmp.res`
   if (("$res" == "") && ($i != "foo")) then
      set MathLib = ($MathLib $i)
   endif
end

if ("$MathLib" != "") then
   NoteD $ALog "      math packages: $MathLib"
endif

flog $ALog rm -f $Tmp.res

SetParent GSL_Path
SetParent BLAS_Path
SetParent LAPACK_Path

exit(0)

