#
# GNU-AIX - define GNU compilers on AIX
#
# Source Version: 3.0
# Software Release #: LLNL-CODE-422942
#
# include "cpyright.h"
#

run analyze/rpath gnu

# NOTE: this should eventually be put in a site specific file
setenv PATH  ${PATH}:/usr/local/bin

Group AF {
   PATTERN_WARN = ":+sp+warning:"
   PATTERN_ERR  = ":+sp+error:"
}

Tool CC {
   Exe       = gcc
   Flags     = -fsignaling-nans -mminimal-toc
   Flags    += [ _env_ = Bits ;              # address bit size
                 *     = -maix* ]
   Flags    += [ _cmd_ = -p ;                # profiling
	         on    = -pg ]
   Flags    += [ _cmd_ = -cov ;              # coverage analysis
	         on    = -fprofile-arcs -ftest-coverage ]
   Debug     = -g -O0 -Wall
   Optimize  = -g -O -Wunused
   Version   = -v
}

Tool FC {
   Exe      = gfortran
   Flags    = -fsignaling-nans -mminimal-toc
   Flags   += [ _env_ = Bits ;               # address bit size
                *     = -maix* ]
   Flags   += [ _cmd_ = -p ;                 # profiling
	        on    = -pg ]
   Flags   += [ _cmd_ = -cov ;               # coverage analysis
	        on    = -fprofile-arcs -ftest-coverage ]
   Debug    = -g -O0 -Wall
   Optimize = -g -O -Wunused
   Version  = -v
}

Tool CXX {
   Exe       = g++
   Flags     = 
   Debug     = -g -O0 -Wall
   Optimize  = -g -O -Wunused
   Version   = -v
}

Tool LD {
   RPath    = -Wl,-bsvr4,-R,@
   Flags    = [ _env_ = Bits ;               # address bit size
                *     = -Wl,-b* ]
   Flags   += [ _cmd_ = -p ;                 # profiling
	        on    = -pg ]
   Flags   += [ _cmd_ = -cov ;               # coverage analysis
	        on    = -lgcov ]
}

Tool Lex {
   Flags  = -w
}

Tool AR {
   Exe   = /bin/ar
   Flags = [ _env_ = Bits ;                 # address bit size
             *     = -X* ]
}

Group AF {
   PATTERN_WARN = ":+sp+warning:"
   PATTERN_ERR  = ":+sp+error:"
}

Group Std {
   LD_Flags = ${LD_Flags}
}

Group Cfg {
   Use    = Std
   CC_Exe = gcc
}

Group OpenMP {
   CC_Flags = -fopenmp
   LD_Flags = -fopenmp
   LD_Lib   = -lgomp
   SharedFnc = [ _env_ = PACT_CC_VERSION ;      # compiler version flags
                4.6.0  <  yes ;
                4.6.0  >= no ]
}

Group Shared {
   LD_Exe   = gcc
   CC_Flags = -fPIC
   LD_Flags = -shared
}

Group PThread {
   LD_Lib = -lpthread 
}

include features/aix
include cpp-rule
include serial
