#
# COMMON - common setup for programs in write
#
# include "cpyright.h"
#

unalias *

set Cmd    = $0
set Exe    = $Cmd:t
set ExeDir = $Cmd:h

set llog       = $1
set psy_scrdir = $2
set psy_mngdir = $psy_scrdir:h/manager

source $psy_scrdir/functions-pact.csh
source $psy_scrdir/csh-subroutines

if ($?FirstCommon == 0) then
   set lroot = $psy_scrdir:h
   set larch = `$psy_scrdir/cfgman use`
   set lbin  = $lroot/dev/$larch/bin
   set path  = ( $psy_scrdir $lbin $path )

   unset lbin
   unset lroot
   unset larch

   eval `$psy_scrdir/prune-env -e psy_mngdir pact`

   setenv FirstCommon FALSE

   InitLog Log $llog:h/write.$0:t
   unset llog

   Note $Log ""
   Separator $Log
   Note $Log "Command: $Cmd"
   Note $Log "Current: $cwd"
   Note $Log "Date: `date`"
   Note $Log "Manager directory: $psy_mngdir"
   Note $Log ""

   dbmget $Log PATH
   flog $Log set path = ( $psy_scrdir $path )

endif


